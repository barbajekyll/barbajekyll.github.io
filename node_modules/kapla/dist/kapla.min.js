!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Kapla",[],t):"object"==typeof exports?exports.Kapla=t():e.Kapla=t()}(window,function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=34)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(2);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var r=n(25);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(23);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var r=n(20);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var i=n(19);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var a=n(18);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})});var l=n(17);Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}})})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Multimap=void 0;var o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(o=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&l.return&&l.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=n(7);t.Multimap=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.valuesByKey=new Map}return r(e,[{key:"add",value:function(e,t){(0,i.add)(this.valuesByKey,e,t)}},{key:"delete",value:function(e,t){(0,i.del)(this.valuesByKey,e,t)}},{key:"has",value:function(e,t){var n=this.valuesByKey.get(e);return n&&n.has(t)}},{key:"hasKey",value:function(e){return this.valuesByKey.has(e)}},{key:"hasValue",value:function(e){return Array.from(this.valuesByKey.values()).some(function(t){return t.has(e)})}},{key:"getValuesForKey",value:function(e){var t=this.valuesByKey.get(e);return t?Array.from(t):[]}},{key:"getKeysForValue",value:function(e){return Array.from(this.valuesByKey).filter(function(t){return o(t,2)[1].has(e)}).map(function(e){return o(e,1)[0]})}},{key:"values",get:function(){return Array.from(this.valuesByKey.values()).reduce(function(e,t){return e.concat(Array.from(t))},[])}},{key:"size",get:function(){return Array.from(this.valuesByKey.values()).reduce(function(e,t){return e+t.size},0)}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(o=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&l.return&&l.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();t.autoLoad=function(e){return e.keys().map(function(t){return function(e,t){var n=function(e){var t=e.match(/^(?:\.\/)?([A-Z]{1}[A-Za-z]+|[a-z/]+\/[A-Z]{1}[A-Za-z]+)(?:\.js?)$/)||[],n=o(t,2)[1];if(n)return n.replace(/([A-Z])/g,"-$1").replace(/^-/,"").replace(/\/-/g,"/").replace(/\//g,"--").toLowerCase();return!1}(t);if(n)return function(e,t){var n=e.default;if("function"==typeof n)return{slug:t,ComponentConstructor:n};return!1}(e(t),n);return!1}(e,t)}).filter(function(e){return e})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(3);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var r=n(21);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomEvent=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(4);t.CustomEvent=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t,this.capitalizedName=(0,r.ucfirst)(t),this.scope="global",this.log=n,this.eventByElement=new Map}return o(e,[{key:"bind",value:function(e,t){var n=e.context.element;this.eventByElement.set(n,this.listener(e)),t.on(this.name,this.eventByElement.get(n))}},{key:"unbind",value:function(e,t){var n=e.context.element;t.off(this.name,this.eventByElement.get(n))}},{key:"listener",value:function(e){var t="on"+this.capitalizedName;return function(){e[t].apply(e,arguments)}}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ee=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function(e){return e&&e.__esModule?e:{default:e}}(n(22));var i=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._logs=new Set,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default),o(t,[{key:"emit",value:function(){for(var e,n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var i=o[0];o.slice(1);this._logs.has(i),(e=function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(o):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emit",this)).call.apply(e,[this].concat(o))}},{key:"add",value:function(e){(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this._logs.add(e)}},{key:"remove",value:function(e){this._logs.has(e)&&this._logs.delete(e)}}]),t}();t.ee=new i},function(e,t,n){"use strict";function o(e,t){var n=e.get(t);return n||(n=new Set,e.set(t,n)),n}function r(e,t){var n=e.get(t);null!==n&&0===n.size&&e.delete(t)}Object.defineProperty(t,"__esModule",{value:!0}),t.add=function(e,t,n){o(e,t).add(n)},t.del=function(e,t,n){o(e,t).delete(n),r(e,t)},t.fetch=o,t.prune=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(26);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var r=n(24);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Component=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(1);t.Component=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.context=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Handler),o(t,[{key:"load",value:function(){}},{key:"init",value:function(){}},{key:"destroy",value:function(){}},{key:"scope",get:function(){return this.context.scope}},{key:"$el",get:function(){return this.scope.element}},{key:"$refs",get:function(){return this.scope.refs}},{key:"slug",get:function(){return this.scope.slug}},{key:"data",get:function(){return this.scope.data}}]),t}()},function(e){e.exports=["Holy Agility","Holy Almost","Holy Alphabet","Holy Alps","Holy Alter Ego","Holy Anagram","Holy Apparition","Holy Armadillo","Holy Armour Plate","Holy Ashtray","Holy Asp","Holy Astronomy","Holy Astringent Plum-like Fruit","Holy Audubon","Holy Backfire","Holy Ball And Chain","Holy Bank Balance","Holy Bankruptcy","Holy Banks","Holy Bargain Basements","Holy Barracuda","Holy Bat Logic","Holy Bat Trap","Holy Batman","Holy Benedict Arnold","Holy Bijou","Holy Bikini","Holy Bill Of Rights","Holy Birthday Cake","Holy Black Beard","Holy Blackout","Holy Blank Cartridge","Holy Blizzard","Holy Blonde Mackerel Ash","Holy Bluebeard","Holy Bouncing Boiler Plate","Holy Bowler","Holy Bullseye","Holy Bunions","Holy Caffeine","Holy Camouflage","Holy Captain Nemo","Holy Caruso","Holy Catastrophe","Holy Cat(s)","Holy Chicken Coop","Holy Chilblains","Holy Chocolate Eclair","Holy Cinderella","Holy Cinemascope","Holy Cliche","Holy Cliffhangers","Holy Clockwork","Holy Clockworks","Holy Cofax You Mean","Holy Coffin Nails","Holy Cold Creeps","Holy Complications","Holy Conflagration","Holy Contributing to the Delinquency of Minors","Holy Corpuscles","Holy Cosmos","Holy Costume Party","Holy Crack Up","Holy Crickets","Holy Crossfire","Holy Crucial Moment","Holy Cryptology","Holy D'artagnan","Holy Davy Jones","Holy Detonator","Holy Disappearing Act","Holy Distortion","Holy Diversionary Tactics","Holy Dr. Jekyll and Mr. Hyde","Holy Egg Shells","Holy Encore","Holy Endangered Species","Holy Epigrams","Holy Escape-hatch","Holy Explosion","Holy Fate-worse-than-death","Holy Felony","Holy Finishing-touches","Holy Fireworks","Holy Firing Squad","Holy Fishbowl","Holy Flight Plan","Holy Flip-flop","Holy Flood Gate","Holy Floor Covering","Holy Flypaper","Holy Fly Trap","Holy Fog","Holy Forecast","Holy Fork In The Road","Holy Fourth Amendment","Holy Fourth Of July","Holy Frankenstein","Holy Frankenstein It's Alive","Holy Fratricide","Holy Frogman","Holy Fruit Salad","Holy Frying Towels","Holy Funny Bone","Holy Gall","Holy Gambles","Holy Gemini","Holy Geography","Holy Ghost Writer","Holy Giveaways","Holy Glow Pot","Holy Golden Gate","Holy Graf Zeppelin","Holy Grammar","Holy Graveyards","Holy Greed","Holy Green Card","Holy Greetings-cards","Holy Guacamole","Holy Guadalcanal","Holy Gullibility","Holy Gunpowder","Holy Haberdashery","Holy Hailstorm","Holy Hairdo","Holy Hallelujah","Holy Halloween","Holy Hallucination","Holy Hamburger","Holy Hamlet","Holy Hamstrings","Holy Happenstance","Holy Hardest Metal In The World","Holy Harem","Holy Harshin","Holy Haziness","Holy Headache","Holy Headline","Holy Heart Failure","Holy Heartbreak","Holy Heidelberg","Holy Helmets","Holy Helplessness","Holy Here We Go Again","Holy Hi-fi","Holy Hieroglyphic","Holy High-wire","Holy Hijack","Holy Hijackers","Holy History","Holy Hoaxes","Holy Hole In A Donut","Holy Hollywood","Holy Holocaust","Holy Homecoming","Holy Homework","Holy Homicide","Holy Hoodwink","Holy Hoof Beats","Holy Hors D'Oeuvre","Holy Horseshoes","Holy Hostage","Holy Hot Foot","Holy Houdini","Holy Human Collectors Item","Holy Human Pearls","Holy Human Pressure Cookers","Holy Human Surfboards","Holy Hunting Horn","Holy Hurricane","Holy Hutzpa","Holy Hydraulics","Holy Hypnotism","Holy Hypodermics","Holy Ice Picks","Holy Ice Skates","Holy Iceberg","Holy Impossibility","Holy Impregnability","Holy Incantation","Holy Inquisition","Holy Interplanetary Yardstick","Holy Interruptions","Holy Iodine","Holy IT and T","Holy Jack In The Box","Holy Jackpot","Holy Jail Break","Holy Jaw Breaker","Holy Jelly Molds","Holy Jet Set","Holy Jigsaw Puzzles","Holy Jitter Bugs","Holy Joe","Holy Journey To The Center Of The Earth","Holy Jumble","Holy Jumpin' Jiminy","Holy Karats","Holy Key Hole","Holy Key Ring","Holy Kilowatts","Holy Kindergarten","Holy Knit One Purl Two","Holy Knock Out Drops","Holy Known Unknown Flying Objects","Holy Kofax","Holy Las Vegas","Holy Leopard","Holy Levitation","Holy Liftoff","Holy Living End","Holy Lodestone","Holy Long John Silver","Holy Looking Glass","Holy Love Birds","Holy Luther Burbank","Holy Madness","Holy Magic Lantern","Holy Magician","Holy Main Springs","Holy Marathon","Holy Mashed Potatoes","Holy Masquerade","Holy Matador","Holy Mechanical Armies","Holy Memory Bank","Holy Merlin Magician","Holy Mermaid","Holy Merry Go Around","Holy Mesmerism","Holy Metronome","Holy Miracles","Holy Miscast","Holy Missing Relatives","Holy Molars","Holy Mole Hill","Holy Mucilage","Holy Multitudes","Holy Murder","Holy Mush","Holy Naive","Holy New Year's Eve","Holy Nick Of Time","Holy Nightmare","Holy Non Sequiturs","Holy Oleo","Holy Olfactory","Holy One Track Bat Computer Mind","Holy Oversight","Holy Oxygen","Holy Paderewski","Holy Paraffin","Holy Perfect Pitch","Holy Pianola","Holy Pin Cushions","Holy Polar Front","Holy Polar Ice Sheet","Holy Polaris","Holy Popcorn","Holy Potluck","Holy Pressure Cooker","Holy Priceless Collection of Etruscan Snoods","Holy Pseudonym","Holy Purple Cannibals","Holy Puzzlers","Holy Rainbow","Holy Rats In A Trap","Holy Ravioli","Holy Razors Edge","Holy Recompense","Holy Red Herring","Holy Red Snapper","Holy Reincarnation","Holy Relief","Holy Remote Control Robot","Holy Reshevsky","Holy Return From Oblivion","Holy Reverse Polarity","Holy Rheostat","Holy Ricochet","Holy Rip Van Winkle","Holy Rising Hemlines","Holy Roadblocks","Holy Robert Louis Stevenson","Holy Rock Garden","Holy Rocking Chair","Holy Romeo And Juliet","Holy Rudder","Holy Safari","Holy Sarcophagus","Holy Sardine","Holy Scalding","Holy Schizophrenia","Holy Sedatives","Holy Self Service","Holy Semantics","Holy Serpentine","Holy Sewer Pipe","Holy Shamrocks","Holy Sherlock Holmes","Holy Show-Ups","Holy Showcase","Holy Shrinkage","Holy Shucks","Holy Skull Tap","Holy Sky Rocket","Holy Slipped Disc","Holy Smoke","Holy Smokes","Holy Smokestack","Holy Snowball","Holy Sonic Booms","Holy Special Delivery","Holy Spider Webs","Holy Split Seconds","Holy Squirrel Cage","Holy Stalactites","Holy Stampede","Holy Standstills","Holy Steam Valve","Holy Stew Pot","Holy Stomach Aches","Holy Stratosphere","Holy Stuffing","Holy Subliminal","Holy Sudden Incapacitation","Holy Sundials","Holy Surprise Party","Holy Switch A Roo","Holy Taj Mahal","Holy Tartars","Holy Taxation","Holy Taxidermy","Holy Tee Shot","Holy Ten Toes","Holy Terminology","Holy Time Bomb","Holy Tintinnabulation","Holy Tipoffs","Holy Titanic","Holy Tome","Holy Toreador","Holy Trampoline","Holy Transistors","Holy Travel Agent","Holy Trickery","Holy Triple Feature","Holy Trolls And Goblins","Holy Tuxedo","Holy Uncanny Photographic Mental Processes","Holy Understatements","Holy Underwritten Metropolis","Holy Unlikelihood","Holy Unrefillable Prescriptions","Holy Vat","Holy Venezuela","Holy Vertebrae","Holy Voltage","Holy Waste Of Energy","Holy Wayne Manor","Holy Weaponry","Holy Wedding Cake","Holy Wernher von Braun","Holy Whiskers","Holy Wigs","Holy Zorro"]},function(e,t,n){const o=n(10);t.all=o,t.random=(()=>o[Math.floor(Math.random()*o.length)])},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={update:function(){if("undefined"!=typeof window&&"function"==typeof window.addEventListener){var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}}),n=function(){};window.addEventListener("testPassiveEventSupport",n,t),window.removeEventListener("testPassiveEventSupport",n,t),o.hasSupport=e}}};o.update(),t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={update:function(){"undefined"!=typeof window&&(o.hasSupport="ontouchstart"in window,o.browserSupportsApi=Boolean(window.TouchEvent))}};o.update(),t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={update:function(){"undefined"!=typeof window&&"function"==typeof window.matchMedia&&(o.fine=window.matchMedia("(pointer: fine)").matches,o.coarse=window.matchMedia("(pointer: coarse)").matches,o.none=window.matchMedia("(pointer: none)").matches,o.anyFine=window.matchMedia("(any-pointer: fine)").matches,o.anyCoarse=window.matchMedia("(any-pointer: coarse)").matches,o.anyNone=window.matchMedia("(any-pointer: none)").matches)}};o.update(),t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={update:function(){"undefined"!=typeof window&&"function"==typeof window.matchMedia&&(o.hover=window.matchMedia("(hover: hover)").matches,o.none=window.matchMedia("(hover: none)").matches||window.matchMedia("(hover: on-demand)").matches,o.anyHover=window.matchMedia("(any-hover: hover)").matches,o.anyNone=window.matchMedia("(any-hover: none)").matches||window.matchMedia("(any-hover: on-demand)").matches)}};o.update(),t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=l(n(15)),r=l(n(14)),i=l(n(13)),a=l(n(12));function l(e){return e&&e.__esModule?e:{default:e}}var u={state:{detectHover:o.default,detectPointer:r.default,detectTouchEvents:i.default,detectPassiveEvents:a.default},update:function(){u.state.detectHover.update(),u.state.detectPointer.update(),u.state.detectTouchEvents.update(),u.state.detectPassiveEvents.update(),u.updateOnlyOwnProperties()},updateOnlyOwnProperties:function(){if("undefined"!=typeof window){u.passiveEvents=u.state.detectPassiveEvents.hasSupport||!1,u.hasTouch=u.state.detectTouchEvents.hasSupport||!1,u.deviceType=function(e,t,n,o){return e&&(t||n)?"hybrid":e&&Object.keys(o.detectHover).filter(function(e){return"update"!==e}).every(function(e){return!1===o.detectHover[e]})&&Object.keys(o.detectPointer).filter(function(e){return"update"!==e}).every(function(e){return!1===o.detectPointer[e]})?window.navigator&&/android/.test(window.navigator.userAgent.toLowerCase())?"touchOnly":"hybrid":e?"touchOnly":"mouseOnly"}(u.hasTouch,u.state.detectHover.anyHover,u.state.detectPointer.anyFine,u.state),u.hasMouse="touchOnly"!==u.deviceType,u.primaryInput=("mouseOnly"===u.deviceType?"mouse":"touchOnly"===u.deviceType&&"touch")||u.state.detectPointer.fine&&"mouse"||u.state.detectPointer.coarse&&"touch"||"mouse";/windows/.test(window.navigator.userAgent.toLowerCase())&&/chrome/.test(window.navigator.userAgent.toLowerCase())&&function(e){return e>=59&&e<62}(parseInt(/Chrome\/([0-9.]+)/.exec(navigator.userAgent)[1],10))&&u.hasTouch&&(u.deviceType="hybrid",u.hasMouse=!0,u.primaryInput="mouse")}}};u.updateOnlyOwnProperties(),t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Handler=void 0;var o=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(o=(a=l.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{!o&&l.return&&l.return()}finally{if(r)throw i}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(e){return e&&e.__esModule?e:{default:e}}(n(16)),a=n(4),l=n(1);t.Handler=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.context=t}return r(e,null,[{key:"events",get:function(){return this._events||Object.defineProperty(this,"_events",{value:Object.getOwnPropertyNames(this.prototype).filter(function(e){return/^on/.test(e)}).map(function(e){return(0,a.lcfirst)(e.slice(2))})})._events}}]),r(e,[{key:"getMethod",value:function(e){var t=e;if(l.mixedEvents.hasValue(e)&&this.constructor.events.includes(l.mixedEvents.getKeysForValue(e)[0])){var n=l.mixedEvents.getKeysForValue(e);t=o(n,1)[0]}return"on"+(0,a.ucfirst)(t)}},{key:"getCustomOptions",value:function(e){return this["options"+(0,a.ucfirst)(e)]||!1}},{key:"getCategory",value:function(e){return l.customEvents.getScope(e)?"custom":l.mixedEvents.hasKey(e)?"mixed":!!this[this.getMethod(e)]&&"native"}},{key:"_bindEvent",value:function(t){var n=this,o=this.getCategory(t);switch(o||this.context.handleError(new Error,"Unknown event type ["+t+"]"),o){case"custom":l.customEvents.bind(t,this,this.getCustomOptions(t));break;case"mixed":l.mixedEvents.getValuesForKey(t).forEach(function(t){n.context.element.addEventListener(t,n,e.getOptions(t))});break;case"native":default:this.context.element.addEventListener(t,this,e.getOptions(t))}}},{key:"_unbindEvent",value:function(t){var n=this,o=this.getCategory(t);switch(o||this.context.handleError(new Error,"Unknown event type ["+t+"]"),o){case"custom":l.customEvents.unbind(t,this);break;case"mixed":l.mixedEvents.getValuesForKey(t).forEach(function(t){n.context.element.removeEventListener(t,n,e.getOptions(t))});break;case"native":default:this.context.element.removeEventListener(t,this,e.getOptions(t))}}},{key:"handleEvent",value:function(e){var t=l.mixedEvents.getKeysForValue(e.type)[0]||e.type,n=this["delegate"+(0,a.ucfirst)(t)];if(n){var o=e.target.matches(n)?e.target:(0,a.$parent)(e.target,n);[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(this.context.element.querySelectorAll(n))).indexOf(o)>=0&&this[this.getMethod(e.type)](e,o)}else this[this.getMethod(e.type)](e)}},{key:"bindAll",value:function(){var e=this;(this.constructor.events||[]).forEach(function(t){e._bindEvent(t)})}},{key:"unbindAll",value:function(){var e=this;this.constructor.events.forEach(function(t){e._unbindEvent(t)})}},{key:"bind",value:function(e){this._bindEvent(e)}},{key:"unbind",value:function(e){this._unbindEvent(e)}},{key:"subscribe",value:function(e){return l.subscribers.add(this,e)}},{key:"emit",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];l.subscribers.emit.apply(l.subscribers,[this].concat(t))}},{key:"unsubscribeAll",value:function(){l.subscribers.remove(this)}}],[{key:"getNativeMethod",value:function(e){return"on"+(0,a.ucfirst)(e)}},{key:"getOptions",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{capture:!1};return l.passiveEvents.includes(e)&&(t.passive=!0),!0===i.default.passiveEvents?t:t.capture}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.subscribers=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(0);function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var a=function(){function e(t){i(this,e),this._component=t,this._callbacksByName=new r.Multimap}return o(e,[{key:"on",value:function(e,t){this._callbacksByName.add(e,t)}},{key:"trigger",value:function(e){for(var t=this,n=arguments.length,o=Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];this._callbacksByName.getValuesForKey(e).forEach(function(e){e.apply.apply(e,[t._component].concat(o))})}},{key:"component",get:function(){return this._component}}]),e}(),l=function(){function e(){i(this,e),this._componentsBySlug=new r.Multimap,this._subscribersBySlug=new r.Multimap}return o(e,[{key:"add",value:function(e,t){if(this._componentsBySlug.hasKey(t,e))return this._subscribersBySlug.getValuesForKey(t).filter(function(t){return t.component===e})[0];var n=new a(e);return this._componentsBySlug.add(t,e),this._subscribersBySlug.add(t,n),n}},{key:"remove",value:function(e){var t=this;this._componentsBySlug.hasValue(e)&&this._componentsBySlug.getKeysForValue(e).forEach(function(n){t._componentsBySlug.delete(n,e),t._subscribersBySlug.getValuesForKey(n).forEach(function(o){o.component===e&&t._subscribersBySlug.delete(n,o)})})}},{key:"emit",value:function(e){for(var t=e.slug,n=arguments.length,o=Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];var i=o[0],a=o.slice(1);this._subscribersBySlug.hasKey(t)&&this._subscribersBySlug.getValuesForKey(t).forEach(function(e){e.trigger(i,a)})}}]),e}();t.subscribers=new l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.passiveEvents=["scroll","wheel","touchstart","touchmove","touchend"]},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mixedEvents=void 0;var o=n(0),r={enter:["mouseenter","touchstart"],leave:["mouseleave","touchend"],move:["mousemove","touchmove"],over:["mouseover","touchmove"],out:["mouseout","touchmove"]},i=t.mixedEvents=new o.Multimap;Object.keys(r).forEach(function(e){r[e].forEach(function(t){i.add(e,t)})})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ucfirst=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},t.lcfirst=function(e){return e.charAt(0).toLowerCase()+e.slice(1)},t.$parent=function e(t,n){if(!t.parentNode||"function"!=typeof t.parentNode.matches)return;if(t.parentNode.matches(n))return t.parentNode;return e(t.parentNode,n)}},function(e,t,n){"use strict";var o=Object.prototype.hasOwnProperty,r="~";function i(){}function a(e,t,n,o,i){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new function(e,t,n){this.fn=e,this.context=t,this.once=n||!1}(n,o||e,i),l=r?r+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],a]:e._events[l].push(a):(e._events[l]=a,e._eventsCount++),e}function l(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function u(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(r=!1)),u.prototype.eventNames=function(){var e,t,n=[];if(0===this._eventsCount)return n;for(t in e=this._events)o.call(e,t)&&n.push(r?t.slice(1):t);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(e)):n},u.prototype.listeners=function(e){var t=r?r+e:e,n=this._events[t];if(!n)return[];if(n.fn)return[n.fn];for(var o=0,i=n.length,a=new Array(i);o<i;o++)a[o]=n[o].fn;return a},u.prototype.listenerCount=function(e){var t=r?r+e:e,n=this._events[t];return n?n.fn?1:n.length:0},u.prototype.emit=function(e,t,n,o,i,a){var l=r?r+e:e;if(!this._events[l])return!1;var u,s,c=this._events[l],y=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),y){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,n),!0;case 4:return c.fn.call(c.context,t,n,o),!0;case 5:return c.fn.call(c.context,t,n,o,i),!0;case 6:return c.fn.call(c.context,t,n,o,i,a),!0}for(s=1,u=new Array(y-1);s<y;s++)u[s-1]=arguments[s];c.fn.apply(c.context,u)}else{var f,h=c.length;for(s=0;s<h;s++)switch(c[s].once&&this.removeListener(e,c[s].fn,void 0,!0),y){case 1:c[s].fn.call(c[s].context);break;case 2:c[s].fn.call(c[s].context,t);break;case 3:c[s].fn.call(c[s].context,t,n);break;case 4:c[s].fn.call(c[s].context,t,n,o);break;default:if(!u)for(f=1,u=new Array(y-1);f<y;f++)u[f-1]=arguments[f];c[s].fn.apply(c[s].context,u)}}return!0},u.prototype.on=function(e,t,n){return a(this,e,t,n,!1)},u.prototype.once=function(e,t,n){return a(this,e,t,n,!0)},u.prototype.removeListener=function(e,t,n,o){var i=r?r+e:e;if(!this._events[i])return this;if(!t)return l(this,i),this;var a=this._events[i];if(a.fn)a.fn!==t||o&&!a.once||n&&a.context!==n||l(this,i);else{for(var u=0,s=[],c=a.length;u<c;u++)(a[u].fn!==t||o&&!a[u].once||n&&a[u].context!==n)&&s.push(a[u]);s.length?this._events[i]=1===s.length?s[0]:s:l(this,i)}return this},u.prototype.removeAllListeners=function(e){var t;return e?(t=r?r+e:e,this._events[t]&&l(this,t)):(this._events=new i,this._eventsCount=0),this},u.prototype.off=u.prototype.removeListener,u.prototype.addListener=u.prototype.on,u.prefixed=r,u.EventEmitter=u,e.exports=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.customEvents=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(0),i=n(6),a=n(5);var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._types=new Set,this._typesByScope=new r.Multimap,this._eventByType=new Map,this._componentsByType=new r.Multimap}return o(e,[{key:"getScope",value:function(e){return this._typesByScope.getKeysForValue(e)[0]}},{key:"getEvent",value:function(e){return this._eventByType.get(e)}},{key:"add",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=t||new a.CustomEvent(e,n),r=o.scope||"component";this._types.add(e),this._typesByScope.add(r,e),this._eventByType.set(e,o),"global"===r&&i.ee.add(e,o.log)}},{key:"bind",value:function(e,t,n){var o=this.getScope(e),r=this.getEvent(e);"global"===o?(this._componentsByType.getValuesForKey(e).includes(t)||r.bind(t,i.ee,n),this._componentsByType.add(e,t)):r.bind(t,i.ee,n)}},{key:"unbind",value:function(e,t){var n=this.getScope(e),o=this.getEvent(e);"global"===n?(this._componentsByType.delete(e,t),this._componentsByType.hasValue(t)||o.unbind(t,i.ee)):o.unbind(t,i.ee)}},{key:"events",get:function(){return Array.from(this.types)}},{key:"types",get:function(){return this._types}}]),e}();t.customEvents=new l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();t.ElementObserver=function(){function e(t,n){var o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.delegate=n,this.started=!1,this.elements=new Set,this.mutationObserver=new MutationObserver(function(e){return o._processMutations(e)})}return o(e,[{key:"start",value:function(){this.started||(this.mutationObserver.observe(this.element,{attributes:!0,childList:!0,subtree:!0}),this.started=!0,this.refresh())}},{key:"stop",value:function(){this.started&&(this.mutationObserver.takeRecords(),this.mutationObserver.disconnect(),this.started=!1)}},{key:"refresh",value:function(){if(this.started){var e=new Set(this._matchElementsInTree()),t=!0,n=!1,o=void 0;try{for(var r,i=Array.from(this.elements)[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var a=r.value;e.has(a)||this._removeElement(a)}}catch(e){n=!0,o=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw o}}var l=!0,u=!1,s=void 0;try{for(var c,y=Array.from(e)[Symbol.iterator]();!(l=(c=y.next()).done);l=!0){var f=c.value;this._addElement(f)}}catch(e){u=!0,s=e}finally{try{!l&&y.return&&y.return()}finally{if(u)throw s}}}}},{key:"_matchElement",value:function(e){return this.delegate.matchElement(e)}},{key:"_matchElementsInTree",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.element;return this.delegate.matchElementsInTree(e)}},{key:"_processMutations",value:function(e){var t=!0,n=!1,o=void 0;try{for(var r,i=e[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var a=r.value;this._processMutation(a)}}catch(e){n=!0,o=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw o}}}},{key:"_processMutation",value:function(e){"attributes"===e.type?this._processAttributeChange(e.target,e.attributeName):"childList"===e.type&&(this._processRemovedNodes(e.removedNodes),this._processAddedNodes(e.addedNodes))}},{key:"_processAttributeChange",value:function(e,t){var n=e;this.elements.has(n)?this.delegate.elementAttributeChanged&&this._matchElement(n)?this.delegate.elementAttributeChanged(n,t):this._removeElement(n):this._matchElement(n)&&this._addElement(n)}},{key:"_processRemovedNodes",value:function(e){var t=!0,n=!1,o=void 0;try{for(var r,i=Array.from(e)[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var a=r.value;this._processNode(a,this._removeElement)}}catch(e){n=!0,o=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw o}}}},{key:"_processAddedNodes",value:function(e){var t=!0,n=!1,o=void 0;try{for(var r,i=Array.from(e)[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var a=r.value;this._processNode(a,this._addElement)}}catch(e){n=!0,o=e}finally{try{!t&&i.return&&i.return()}finally{if(n)throw o}}}},{key:"_processNode",value:function(t,n){var o=e.elementFromNode(t);if(o){var r=!0,i=!1,a=void 0;try{for(var l,u=this._matchElementsInTree(o)[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){var s=l.value;n.call(this,s)}}catch(e){i=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(i)throw a}}}}},{key:"_addElement",value:function(e){this.elements.has(e)||(this.elements.add(e),this.delegate.elementMatched&&this.delegate.elementMatched(e))}},{key:"_removeElement",value:function(e){this.elements.has(e)&&(this.elements.delete(e),this.delegate.elementUnmatched&&this.delegate.elementUnmatched(e))}}],[{key:"elementFromNode",value:function(e){return e.nodeType===Node.ELEMENT_NODE&&e}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IndexedMultimap=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,n,o)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(o):void 0},i=n(2),a=n(7);t.IndexedMultimap=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.keysByValue=new Map,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,i.Multimap),o(t,[{key:"add",value:function(e,n){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"add",this).call(this,e,n),(0,a.add)(this.keysByValue,n,e)}},{key:"delete",value:function(e,n){r(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"delete",this).call(this,e,n),(0,a.del)(this.keysByValue,n,e)}},{key:"hasValue",value:function(e){return this.keysByValue.has(e)}},{key:"getKeysForValue",value:function(e){var t=this.keysByValue.get(e);return t?Array.from(t):[]}},{key:"values",get:function(){return Array.from(this.keysByValue.keys())}}]),t}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenObserver=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(8),i=n(0);t.TokenObserver=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.attributeName=n,this.delegate=o,this.elementObserver=new r.ElementObserver(t,this),this.tokensByElement=new i.IndexedMultimap}return o(e,[{key:"start",value:function(){this.elementObserver.start()}},{key:"stop",value:function(){this.elementObserver.stop()}},{key:"refresh",value:function(){this.elementObserver.refresh()}},{key:"getElementsMatchingToken",value:function(e){return this.tokensByElement.getKeysForValue(e)}},{key:"matchElement",value:function(e){return e.hasAttribute(this.attributeName)}},{key:"matchElementsInTree",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.element,t=this.matchElement(e)?[e]:[],n=Array.from(e.querySelectorAll(this.selector));return t.concat(n)}},{key:"elementMatched",value:function(e){var t=Array.from(this._readTokenSetForElement(e)),n=!0,o=!1,r=void 0;try{for(var i,a=t[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var l=i.value;this._elementMatchedToken(e,l)}}catch(e){o=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}}},{key:"elementUnmatched",value:function(e){var t=this._getTokensForElement(e),n=!0,o=!1,r=void 0;try{for(var i,a=t[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var l=i.value;this._elementUnmatchedToken(e,l)}}catch(e){o=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}}},{key:"elementAttributeChanged",value:function(e){var t=this._readTokenSetForElement(e),n=!0,o=!1,r=void 0;try{for(var i,a=Array.from(t)[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var l=i.value;this.elementMatched(e,l)}}catch(e){o=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}var u=!0,s=!1,c=void 0;try{for(var y,f=this._getTokensForElement(e)[Symbol.iterator]();!(u=(y=f.next()).done);u=!0){var h=y.value;t.has(h)||this.elementUnmatched(e,h)}}catch(e){s=!0,c=e}finally{try{!u&&f.return&&f.return()}finally{if(s)throw c}}}},{key:"_elementMatchedToken",value:function(e,t){this.tokensByElement.has(e,t)||(this.tokensByElement.add(e,t),this.delegate.elementMatchedToken&&this.delegate.elementMatchedToken(e,t,this.attributeName))}},{key:"_elementUnmatchedToken",value:function(e,t){this.tokensByElement.has(e,t)&&(this.tokensByElement.delete(e,t),this.delegate.elementUnmatchedToken&&this.delegate.elementUnmatchedToken(e,t,this.attributeName))}},{key:"_getTokensForElement",value:function(e){return this.tokensByElement.getValuesForKey(e)}},{key:"_readTokenSetForElement",value:function(e){var t=new Set,n=e.getAttribute(this.attributeName)||"",o=!0,r=!1,i=void 0;try{for(var a,l=n.split(/\s+/)[Symbol.iterator]();!(o=(a=l.next()).done);o=!0){var u=a.value;u.length&&t.add(u)}}catch(e){r=!0,i=e}finally{try{!o&&l.return&&l.return()}finally{if(r)throw i}}return t}},{key:"selector",get:function(){return"["+this.attributeName+"]"}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();t.Data=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scope=t}return o(e,[{key:"get",value:function(e){var t=this._getFormattedKey(e);return this.element.getAttribute(t)}},{key:"set",value:function(e,t){var n=this._getFormattedKey(e);return this.element.setAttribute(n,t),this.get(e)}},{key:"has",value:function(e){var t=this._getFormattedKey(e);return this.element.hasAttribute(t)}},{key:"delete",value:function(e){if(this.has(e)){var t=this._getFormattedKey(e);return this.element.removeAttribute(t),!0}return!1}},{key:"_getFormattedKey",value:function(e){return"data-"+this.slug+"-"+function(e){return e.toString().replace(/([A-Z])/g,function(e,t){return"-"+t.toLowerCase()})}(e)}},{key:"element",get:function(){return this.scope.element}},{key:"slug",get:function(){return this.scope.slug}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Scope=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(27);t.Scope=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.schema=t,this.slug=n,this.element=o,this.data=new r.Data(this)}return o(e,[{key:"getRefs",value:function(){var e={},t=this.element.querySelectorAll(this.refSelector),n=!0,o=!1,r=void 0;try{for(var i,a=Array.from(t)[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var l=i.value,u=this.getRefName(l);e[u]?Array.isArray(e[u])?e[u].push(l):e[u]=[e[u],l]:e[u]=l}}catch(e){o=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}return e}},{key:"getRefName",value:function(e){return e.getAttribute(this.refAttribute).replace(this.slug+".","")}},{key:"refs",get:function(){return this.getRefs()}},{key:"refAttribute",get:function(){return this.schema.refAttribute}},{key:"refSelector",get:function(){return"["+this.refAttribute+"*='"+this.slug+".']"}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Context=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(28);t.Context=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.module=t,this.element=n,this.scope=new r.Scope(this.schema,this.slug,n);try{this.component=new t.ComponentConstructor(this),this.component.load()}catch(e){this.handleError(e,"loading component")}}return o(e,[{key:"init",value:function(){try{this.component.init()}catch(e){this.handleError(e,"initializing component")}}},{key:"destroy",value:function(){try{this.component.destroy()}catch(e){this.handleError(e,"destroying component")}}},{key:"bindAll",value:function(){try{this.component.bindAll()}catch(e){this.handleError(e,"binding component")}}},{key:"unbindAll",value:function(){try{this.component.unbindAll()}catch(e){this.handleError(e,"unbinding component")}}},{key:"unsubscribeAll",value:function(){try{this.component.unsubscribeAll()}catch(e){this.handleError(e,"unsubscribing component")}}},{key:"handleError",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=this.identifier,r=this.component,i=this.element;n=Object.assign({identifier:o,component:r,element:i},n),this.application.handleError(e,t,n)}},{key:"application",get:function(){return this.module.application}},{key:"slug",get:function(){return this.module.slug}},{key:"schema",get:function(){return this.application.schema}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Module=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(29);t.Module=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.application=t,this.definition=n,this.contextsByElement=new WeakMap,this.initializedContexts=new Set}return o(e,[{key:"initElement",value:function(e){var t=this._fetchContextForElement(e);t&&!this.initializedContexts.has(t)&&(this.initializedContexts.add(t),t.init(),t.bindAll())}},{key:"destroyElement",value:function(e){var t=this._fetchContextForElement(e);t&&this.initializedContexts.has(t)&&(this.initializedContexts.delete(t),t.unbindAll(),t.unsubscribeAll(),t.destroy())}},{key:"_fetchContextForElement",value:function(e){var t=this.contextsByElement.get(e);return t||(t=new r.Context(this,e),this.contextsByElement.set(e,t)),t}},{key:"slug",get:function(){return this.definition.slug}},{key:"ComponentConstructor",get:function(){return this.definition.ComponentConstructor}},{key:"contexts",get:function(){return Array.from(this.initializedContexts)}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Manager=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(30),i=n(8);t.Manager=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.application=t,this.observer=new i.TokenObserver(this.element,this.componentAttribute,this),this.modulesBySlug=new Map}return o(e,[{key:"start",value:function(){this.observer.start()}},{key:"stop",value:function(){this.observer.stop()}},{key:"addModule",value:function(e){var t=e.slug;this.removeModule(t);var n=new r.Module(this.application,e);this.modulesBySlug.set(t,n),this._initModule(n)}},{key:"removeModule",value:function(e){var t=this.modulesBySlug.get(e);t&&(this.modulesBySlug.delete(e),this._destroyModule(t))}},{key:"elementMatchedToken",value:function(e,t){this._initModuleBySlug(t,e)}},{key:"elementUnmatchedToken",value:function(e,t){this._destroyModuleBySlug(t,e)}},{key:"_initModule",value:function(e){var t=this.observer.getElementsMatchingToken(e.slug),n=!0,o=!1,r=void 0;try{for(var i,a=t[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var l=i.value;e.initElement(l)}}catch(e){o=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}}},{key:"_destroyModule",value:function(e){var t=e.contexts,n=!0,o=!1,r=void 0;try{for(var i,a=t[Symbol.iterator]();!(n=(i=a.next()).done);n=!0){var l=i.value.element;e.destroyElement(l)}}catch(e){o=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(o)throw r}}}},{key:"_initModuleBySlug",value:function(e,t){var n=this.modulesBySlug.get(e);n&&n.initElement(t)}},{key:"_destroyModuleBySlug",value:function(e,t){var n=this.modulesBySlug.get(e);n&&n.destroyElement(t)}},{key:"schema",get:function(){return this.application.schema}},{key:"element",get:function(){return this.application.element}},{key:"componentAttribute",get:function(){return this.schema.componentAttribute}},{key:"modules",get:function(){return Array.from(this.modulesBySlug.values())}},{key:"contexts",get:function(){return this.modules.reduce(function(e,t){return e.concat(Array.from(t.contexts))},[])}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.defaultSchema={componentAttribute:"data-component",refAttribute:"data-ref"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Application=void 0;var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(32),i=n(31),a=n(1);var l=n(11);t.Application=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document.body,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.defaultSchema;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.element=t,this.schema=n,this.manager=new i.Manager(this),this.customEvents=a.customEvents}return o(e,null,[{key:"start",value:function(t,n){var o=new e(t,n);return o.start(),o}}]),o(e,[{key:"start",value:function(){this.manager.start()}},{key:"stop",value:function(){this.manager.stop()}},{key:"register",value:function(e,t){this.load({slug:e,ComponentConstructor:t})}},{key:"load",value:function(e){var t=this;(Array.isArray(e)?e:[e]).forEach(function(e){return t.manager.addModule(e)})}},{key:"unload",value:function(e){var t=this;(Array.isArray(e)?e:[e]).forEach(function(e){return t.manager.removeModule(e)})}},{key:"use",value:function(e,t,n){this.customEvents.types.has(e)&&this.handleError("oups","This event type already exists ["+e+"]"),this.customEvents.add(e,t,n)}},{key:"handleError",value:function(e,t){throw new Error("🤦 "+l.random()+"! "+t+" \n "+e)}},{key:"components",get:function(){return this.manager.contexts.map(function(e){return e.component})}},{key:"events",get:function(){return this.customEvents.events}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(33);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var r=n(9);Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return r[e]}})});var i=n(6);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var a=n(5);Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})});var l=n(3);Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}})});var u=n(2);Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return u[e]}})})}])});